<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8">
   <title>Store canvas in JSON to replicate it</title>
</head>

<body>
  <div id="drawing" style="width:600px; height:400px"></div>
  <p>Example show replication of TCanvas with all primitives, using JSROOT.drawingJSON() function</p>
  <button onclick="StoreJson()" type="button">Replicate</button>
  <div id="replica" style="width:600px; height:400px"></div>

   <script type='module'>

      import { openFile, draw, parse, cleanup } from '../modules/core.mjs';

      import { drawingJSON } from '../modules/painter.mjs';

      // absolute file path can be used as well
      let file = await openFile("../../files/hsimple.root");
      let obj = await file.readObject("hpxpy;1");
      await JSROOT.draw("drawing", obj, "colz");

      function StoreJson() {
         // produce JSON code
         let json = drawingJSON("drawing");

         // parse JSON and get new TCanvas
         let obj2 = parse(json);

         // cleanup previous drawing
         cleanup("replica");

         // draw canvas again
         draw("replica", obj2);

      }
   </script>

</body>

</html>

